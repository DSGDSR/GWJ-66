[gd_scene load_steps=9 format=3 uid="uid://dwrgblleg5uv7"]

[ext_resource type="Texture2D" uid="uid://b15yx0rb52oxa" path="res://assets/gui/handle.png" id="1_fwsjm"]
[ext_resource type="Texture2D" uid="uid://tqnl8uewtnhr" path="res://assets/gui/slider_filler.png" id="2_0no5l"]
[ext_resource type="Texture2D" uid="uid://cdan4jm0pwkp0" path="res://assets/gui/slider.png" id="2_yem0x"]

[sub_resource type="ImageTexture" id="ImageTexture_vsrr0"]

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_cwsdy"]
content_margin_left = 0.0
content_margin_top = 20.0
content_margin_right = 0.0
content_margin_bottom = 20.0
texture = ExtResource("2_yem0x")

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_a2nbe"]
texture = ExtResource("2_0no5l")
texture_margin_bottom = 5.0

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_2bi2y"]
texture = ExtResource("2_0no5l")
texture_margin_bottom = 5.0

[sub_resource type="GDScript" id="GDScript_svubu"]
script/source = "extends HSlider

@export var bus_name: String = 'Master'

@onready var _bus := AudioServer.get_bus_index(bus_name)

func _ready() -> void:
	value_changed.connect(_on_volume_change)
	value = db_to_linear(AudioServer.get_bus_volume_db(_bus)) # TODO set audio from settings

func _on_volume_change(val: float) -> void:
	AudioServer.set_bus_volume_db(_bus, linear_to_db(val))
"

[node name="VolumeSlider" type="HSlider"]
theme_override_icons/grabber = ExtResource("1_fwsjm")
theme_override_icons/grabber_highlight = ExtResource("1_fwsjm")
theme_override_icons/tick = SubResource("ImageTexture_vsrr0")
theme_override_styles/slider = SubResource("StyleBoxTexture_cwsdy")
theme_override_styles/grabber_area = SubResource("StyleBoxTexture_a2nbe")
theme_override_styles/grabber_area_highlight = SubResource("StyleBoxTexture_2bi2y")
max_value = 1.0
step = 0.05
script = SubResource("GDScript_svubu")
